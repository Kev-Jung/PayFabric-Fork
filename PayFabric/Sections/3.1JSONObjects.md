# API3.1 JSON Objects
PayFabric uses JSON objects to send and receive client data. This is the official reference documentation for JSON objects used in the PayFabric REST API.

## Address
Address objects represent the shipping of a customer. This object may be included as a child attribute of other JSON objects.

| Attribute  | Data Type| Definition|Max Length|
| :-----------|:---------| :---------| :---------|
| ID         | GUID | Unique identifier for this record ||
| Customer   | String | ID for this customer. This is generated by the client upon creation of the customer. |nvarchar(128)|
| FirstName   | String | Customer first name. |nvarchar(128)|
| LastName   | String | Customer last name. |nvarchar(128)|
| Country    | String | Country name|nvarchar(64)|
| State      | String | State name| nvarchar(64)| 
| City       | String | City name |nvarchar(64)|
| Line1      | String | Street line 1 |nvarchar(128)|
| Line2      | String | Street line 2 |nvarchar(128)|
| Line3      | String | Street line 3 |nvarchar(128)|
| Email      | String | Email address|nvarchar(128)|
| Phone      | String | Phone number |nvarchar(16)|
| Zip        | String | Zip code |nvarchar(16)|

## Email Recipients Object	
| Attribute  | Data Type| Definition|Max Length|
| :-----------|:---------| :---------| :---------|
| To | Array | Email addresses separate by comma. | nvarchar(max)|
| CC | Array | Email addresses separate by comma. | nvarchar(max)|
| BCC| Array | Email addresses separate by comma. | nvarchar(max)|

## Custom Report Email Recipients Object	
| Attribute  | Data Type| Definition|Max Length|
| :-----------|:---------| :---------| :---------|
| To | Array | Allows active organization users and the user role IDs which applied to at least one active organization user, separated with comma. | nvarchar(max)|
| BCC| Array | Email addresses separate by comma. | nvarchar(max)|


## Batch
| Attribute  | Data Type| Definition|Max Length|
| :-----------|:---------| :---------| :---------|
| BatchId | String | The merchant’s batch ID. | 20 |
| Summary | [Batch Summary Object](https://github.com/PayFabric/APIs/blob/Release-16/PayFabric/Sections/3.1JSONObjects.md#batch-summary) | The summary of transactions. | |
| Transactions | Array of [Transaction](https://github.com/PayFabric/APIs/blob/R19/PayFabric/Sections/3.1JSONObjects.md#transaction)| An array of batched transactions. | |

## Batch Summary 
| Attribute  | Data Type| Definition|
| :-----------|:---------| :---------| 
| Count| Integer | The count of total transactions.|
| NetAmount| Decimal | The net amount of the total transactions.|
| Approved | Integer | The count of approved transactions.|
| Declined| Integer | The count of declined transactions.|
| Failed| Integer |The count of failed transactions.|
| Open |Integer|The count of open transactions.|
| CaptureReady | Integer |The count of ready for capture transactions.|

## Transaction 
| Attribute       | DataType| Definition|Max Length|
| :-----------    |:---------| :---------| :---------| 
| Key             | String | PayFabric transaction key. This is generated by PayFabric upon creation of the transaction.  | varchar(64)|
| State   | String | This field indicates the state of the transaction, possible values are ``Pending Settlement``，``Pending Capture``，``Settled``，``Captured``，``Returned``，``Voided``，``Partially Captured``. |varchar(32)|
| Status          | String | This field indicates the status of the transaction. Possible values are ``Approved``, ``Denied``, ``Declined``, ``Failure``, ``AVSFailure``, ``More Info`` and ``FraudReject``. |varchar(16)|  
| ProcessedDateTime     | String | This field indicates transaction processed date time in merchant timezone. It's format should like "3/23/2015 11:16:19 PM". | datetime| 
| ProcessedDateTimeUTC  | String | This field indicates transaction processed date time in UTC. It's format should like "2020-04-15T00:22:01.000Z". | nvarchar(64)|

## Transaction Receipt Template
| Attribute  | Data Type| Definition|
| :-----------|:---------| :---------| 
| Enabled | bool | True or False indicating if this receipt should be sent to customers.|
| BCC | Array |An array of email addresses to send the email to as a blind carbon copy.|
| Subject | String |The subject of the email.|
| Content | String |The HTML content of the email receipt template. <b>Note:</b> Email receipt templates must maintain a standard according to PCI.|

## Terminal 
| Attribute  | Data Type| Definition|Max Length|
| :-----------|:---------| :---------| :---------|
| TerminalId | GUID|The unique internal ID of this terminal.||
| Name | String | The terminals name for reporting and selection.|nvarchar(64)|
| SerialNumber| String | The serial number of the device.|nvarchar(32)|
| Type| String |The terminal type, only allowed value: PAXGeneric. ||

## Terminal Setting 
| Attribute  | Data Type| Definition|
| :-----------|:---------| :---------| 
|Terminals | Array |An array of terminal IDs that are allowed for this device.|
|DefaultTerminal|GUID|The default terminal ID to use when display the page, can be overridden using HPP parameters.  Must exist in the Terminals array.|
|AllowedProcessingMethod|	Integer|The method of processing method allowed for a specific device.  Allowed values:0 – Web Entry Only/1 – EMV Terminal Only/2 – Both Web and EMV Terminal.|
|DefaultProcessingMethod|	Integer	|The default processing method to display initially.  Required if AllowedProcessingMethod is 2.  Allowed values:0 – EMV Terminal/1 – Web Entry.|
|LockTerminalSelection|	Boolean|	True or False if the terminal selection should be locked after the default is selected.|
|RequireSignature|	Boolean |True or False if the EMV Terminals should request for Customer signature during certain EMV flows.|
|AllowGiftCard|Boolean|True or False if the Gift card should available on Terminal Entry of payment page.|

## Product
| Attribute  | Data Type| Definition|Max Length|
| :-----------|:---------| :---------| :---------|
|ProductId|	Integer|	The unique ID for this product.|RO|
|ItemNumber|	String|	The item number for this product.|nvarchar(64)|
|Description|	String|	The product description.|nvarchar(128)|
|UOM|	String|	The unit of measure for this product.|nvarchar(64)|
|Cost|	Decimal	|The products cost for a single unit.|nvarchar(36)|
|CommodityCode|	String|	The commodity code for this product.  Should use standard UNSPSC codes.|nvarchar(64)|

## Products In Page
| Attribute  | Data Type| Definition|
| :-----------|:---------| :---------|
|Page|	Integer|	The current returned page.|
|TotalRecords|	Integer |	The total number of products.|
|TotalPages|	Integer|	The products total page.|
|Records|Array|	Array of [Product Object](/PayFabric/Sections/3.1JSONObjects.md#product)	|

## Template
| Attribute  | Data Type| Definition|Max Length|
| :-----------|:---------| :---------| :---------|
|TemplateId|	GUID|	The unique internal id of the template.||
|Name|	String|	The name of the template, default templates have the reserved name ‘Standard’|nvarchar(100)|
|Subject|	String	|The subject of the template if the template type is an Email.|nvarchar(200)|
|Message|	String|	The content of the template if the template type is an Email or SMS. Please refer [PayLink parameters](https://github.com/PayFabric/APIs/blob/Release-16/PayLink/Sections/Parameters.md) for all available parameters.|nvarchar(max)|
|CSS|	String|	The CSS (style sheet) applied to the template, if the template type is a Page.|nvarchar(64)|
|JS|	String|	The JS (JavaScript) applied to the template, if the template type is a Page.|nvarchar(64)|
| IsDefault | Boolean |This is a response parameter, if it is true, then means this template is the default template for specific type. ||

## Set Default Template
| Attribute  | Data Type| Definition|
| :-----------|:---------| :---------| 
|TemplateId|	GUID|	The unique internal id of the template.|


## Copy Template
| Attribute  | Data Type| Definition|Max Length|
| :-----------|:---------| :---------| :---------|
|Name	|String|	The name of the new template.|nvarchar(100)|

## Theme
| Attribute  | Data Type| Definition|Max Length|
| :-----------|:---------| :---------| :---------|
|ThemeId|GUID|The themes unique internal id.||
|Name	|String|	The name of the theme.|nvarchar(64)|
|CSS	|String	|The CSS (style sheet) applied to this theme.|nvarchar(max)|
|JS|	String|	The JS (JavaScript) applied to this theme.|nvarchar(max)|
|Parameters|	Array	|The list of parameters that the theme is configured to not show on hosted payment page, allowed values are: `NOBATCH`, `NOSETUPID`, `NOBILLTO`, `NOSHIPTO`, `NOHISTORYCARD`, `NOPAYLATER`||

## Custom Report
| Attribute  | Data Type| Definition|Max Length|
| :-----------|:---------| :---------| :---------|
|ReportId|	GUID|	The id of the custom report.||
|Name|	String|	The name of the custom report.|nvarchar(50)|
|Frequency|	String	|How often the report should be sent out, allowed values: `Daily`, `Weekly`, `Monthly`||
|Message	|String|	The HTML content to send in the email when creating the custom report.|nvarchar(max)|
|AdditionalFields|	Array|	An array of string values indicating which fields should be included in the report. Only [minimum columns](/PayFabric/Sections/3.1JSONObjects.md#custom-report-minimum-fields) included in the custom report by passing null or empty array, you can add [additional columns](/PayFabric/Sections/3.1JSONObjects.md#custom-report-additional-fields) as needed. ||
|TransactionTypes|	Array|	 This field indicating which transaction types to include, a * indicates All Types.  Allowed values: `Authorization`, `Capture`, `Force`, `Refund`, `Sale`, `Void`||
|TransactionStatus|	Array| This field indicating which transaction status to include, a * indicates All Status.  Allowed values: `Approved`, `AvsFailure`, `Denied`, `Failure`, `MoreInfo`, `ThreeDSChallenge`||
|Transaction State| Array | This field indicating which transaction state to include, a * indicates All State. Allow below values: Settled, Unsettled, Captured, Pending Capture, Voided, Returned. Note: Pre-Authorizations (Books) and voids are not included as they are never considered settled or unsettled.||
|Recipients|	[Custom Report Email Recipients Object](/PayFabric/Sections/3.1JSONObjects.md#custom-report-email-recipients-object)|The To and BCC recipients that will receive this report. ||
|DateRangeFrom|Date|This field is only for [Manual Execute Custom Report API](/PayFabric/Sections/CustomReports.md#manual-execute-custom-report) to indicate which transactions processed later than this date, like "05-13-2021"||
|DateRangeTo|Date|This field is only for [Manual Execute Custom Report API](/PayFabric/Sections/CustomReports.md#manual-execute-custom-report) to indicate which transactions processed earlier than this date, like "06-13-2021". **Note:** The maximum value for this field is 1-day prior to today. The max time range is 9 months.||

#### Custom Report Minimum Fields
All reports will include the following fields:
| Column Name  | Definition|
| :-----------|:---------| 
|Transaction Key| PayFabric transaction key.|
|Amount|This field indicates the transaction amount|
|Transaction Type|This field indicates the transaction type|
|Entry Mode|This field indicates the entry of the transaction processed.|
|Username|This field indicates the user who processed the transaction, if the transaction processed by API, then the value will be 'API'.|
|Transaction Date/Time|This field indicates the transaction processed date/time.|
|Transaction Status|This field indicates the transaction status.|
|Payment Method|This field indicates the payment method of the transaction.|

#### Custom Report Additional Fields
| Column Name  | Definition|
| :-----------|:---------| 
|Account|This field indicates the masked account number|
|Billing Name|This field indicates the billing name for the processed transaction.|
|Billing Address|This field indicates the billing address for the processed transaction.|
|CardName|This field indicates the card type of the processed transaction, like "Visa","MasterCard" etc...|
|Currency|This field indicates the currency of the processed transaction.|
|Customer | This field indicates the customer of the processed transaction.|
|Discretionary Data|This field indicates the discretionary data of the processed transaction.|
|Email|This field indicates the billing email address of the transaction.|
|ExpirationDate|This field indicates the card expiration date of the transaction.|
|InvoiceNumber |This field indicates the invoice number of the transaction.|
|Phone|This field indicates the billing phone number of the transaction.|
|RespMsg|This field indicates the response message of the transaction.|
|ResultCode|This field indicates the result code of the transaction.|
|ABA |This field indicates the masked routing number on the transaction.|
|Shipping Address|This field indicates the shipping address for the processed transaction.|
|SettledDate| This field indicates the settled date of the processed transaction.|
|SurchargePercentage|This field indicates the surcharge percentage of the gateway the transaction processed with.|
|SurchargeAmount|This field indicates the surcharge amount for the transaction.|
|OriginalTrxAmount|This field indicates the transaction amount of the processed transaction.|
|CardType|This field indicates the card validation type of the card the transaction processed with. Like "Credit", "Debit", "Prepaid".|
|TransactionState|This field indicates the transaction state of the processed transaction. Like "Settled", "Pending Settlement", "Captured", "Voided", "Returned", "Pending Capture".|
|SetupID|This field indicates the gateway name of the transaction processed with.|
|TaxAmount|This field indicates the tax amount of the processed transaction.|


## Settlement
#### Batch Summary Response Fields
| Attribute  | Data Type| Definition|
| :-----------|:---------| :---------| 
| PostDate | Datetime| The date that EVO submitted the transactions included in this batch to the banks for settlement. |
| MerchantId | String | The EVO merchant ID associated to these batches. |
| MerchantDescription | String | The merchant description or business name. |
| BatchCount | Integer | The total count of unique transactions that exist within this batch. |
| BatchAmount |Decimal|The total net dollar amount of all transactions within this batch (including refunds as a negative amount). |
| BatchId |String| The unique ID for this batch of transactions. |
| FullMerchantId |String| The EVO merchant ID associated to these batches (normally the same as the `MerchantId` field). |
| TerminalId |String| The unique ID assigned to the specific platform or device that processed these transactions.|
| SettledCount |Integer| The total count of the settled transactions in the current batch.|
| SettledAmount |Decimal|The total net dollar amount of the settled transactions in the current batch (including refunds as a negative amount). |
| NonSettledCount |Integer|The total count of transactions that failed settlement (non-settled) in current batch.|
| NonSettledAmount |Decimal| The total net dollar amount of transactions that failed settlement (non-settled, including refunds as a negative amount) in current batch.|

#### Batch Detail Response Fields
| Attribute  | Data Type| Definition|
| :-----------|:---------| :---------| 
| Page |Object|Please check the [Page object](/PayFabric/Sections/3.1JSONObjects.md#Page) for details|
| Records |List|List of [Record](/PayFabric/Sections/3.1JSONObjects.md#Record).|

#### Page
| Attribute  | Data Type| Definition|
| :-----------|:---------| :---------| 
| Size |Integer|Page size.|
| Current |Integer|Page number of current page.|
|TotalRecords|Integer|Count of total transactions.|
|TotalPages|Integer|Count of total pages.|

#### Record
| Attribute  | Data Type| Definition|
| :-----------|:---------| :---------| 
|Account|String|Last four digits of the card account number.|
|SettleAmount|Decimal|Settled amount of the transaction.|
|AuthCode|String|Transaction authorization code.|
|CardName|String|Card brand name.|
|AuthAmount|Decimal|The amount that was originally authorized **May be different than `SettleAmount`**.|
|TrxDate|Datetime|The date the transaction was processed.|
|RefNumber|String|The unique ID assigned to this transaction from the card brands (may be empty or null depending on card brand).|
|PostDate|Datetime|The date that EVO submitted the transactions included in this batch to the banks for settlement.|
|MerchantDescription|String|The merchant description or business name.|
|TerminalId|String|The unique ID assigned to the specific platform or device that processed these transactions.|
|MerchantId|String|The EVO merchant ID associated to these batches.|
|SettleId|String|The unique ID assigned to this transaction for settlement purposes.|
|Downgrade|String|The reason code for why the transaction was downgraded for interchange.|
|ProcessingCodeId|String|The Id assigned to the type of transaction being processed. **ProcessingCode** and **TransactionType** are similar in values.|
|ProcessingCodeDescription|String|The description assigned to the type of transaction being processed. **ProcessingCode** and **TransactionType** are similar in values.|
|TransactionTypeId|String|The Id assigned to the type of transaction being processed. **ProcessingCode** and **TransactionType** are similar in values.|
|TransactionTypeDesc|String|The description assigned to the type of transaction being processed. **ProcessingCode** and **TransactionType** are similar in values.|
|TransactionId|String|The unique ID assigned to the transaction within the EVO backend-platform.  **Note** This is a different value from your PayFabric Transaction Key. |
|RejectCodes|String|The reason code(s) for why the transaction failed to settle.|
|FullMerchantId|String|The EVO merchant ID associated to these batches (normally the same as the `MerchantId` field).|
|RejectReasonsShort|String|A short description of the reason for why a transaction failed to settle.|
|RejectReasonsLong|String|A long description of the reason for why a transaction failed to settle.  In some circumstances, the short and long versions may be identical. |
|SettledStatus|String|The settlement status of a transaction.|
|PayFabricTransactionKey|String|PayFabric transaction key matched with the current settled transaction.|
|ReconciliationIssues|Object|Please check [ReconciliationIssues](/PayFabric/Sections/3.1JSONObjects.md#ReconciliationIssues) for details.|

#### ReconciliationIssues
| Attribute  | Data Type| Definition|
| :-----------|:---------| :---------| 
|Message|String|If PayFabric was unable to find the specific PayFabric transaction that matches this settlement record, or it located multiple transactions that match this settlement record, this message will indicate that.|
|Details|Array|The list PayFabric transaction keys, if multiple PayFabric transactions matched with current settlement record. This array will be 'null' when no PayFabric transactions could be found. |

#### Export Batch Details Request Fields
| Attribute  | Data Type| Definition|
| :-----------|:---------| :---------| 
|Recipients|Array|An array of email addresses that should receive the batch export.|
|ExportType|Enum|The type of report to email to the recipients. Accepted values are `csv`, `tsv` or `excel`. |
